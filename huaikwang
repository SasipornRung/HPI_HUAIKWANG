<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huai Khwang Real Estate Audit Report</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* Bloomberg Terminal Style Theme */
        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: 'Sarabun', 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        /* Typography */
        h1 {
            color: #f1c40f; /* Bloomberg Yellow */
            text-align: center;
            font-size: 2.2em;
            margin-bottom: 10px;
            border-bottom: 2px solid #333;
            padding-bottom: 20px;
        }
        h2 {
            color: #f1c40f;
            border-left: 4px solid #2ecc71; /* Neon Green */
            padding-left: 10px;
            margin-top: 40px;
        }
        h3 {
            color: #ccc;
            margin-top: 20px;
        }
        p {
            color: #b0b0b0;
            font-size: 1.05em;
        }
        
        /* Narrative Box */
        .narrative-box {
            background-color: #1e1e1e;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #333;
            margin-bottom: 40px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }
        .highlight { color: #2ecc71; font-weight: bold; }
        .danger { color: #e74c3c; font-weight: bold; }
        .focus { color: #9b59b6; font-weight: bold; }

        /* Chart Containers */
        .chart-wrapper {
            background-color: #1e1e1e;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
            height: 550px;
        }
        .insight {
            background-color: #2c3e50;
            padding: 10px 15px;
            border-left: 4px solid #3498db;
            font-size: 0.9em;
            margin-bottom: 40px;
            color: #fff;
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 60px;
            color: #555;
            font-size: 0.8em;
            border-top: 1px solid #333;
            padding-top: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>THE HUAI KHWANG AUDIT REPORT</h1>
    <p style="text-align: center; color: #888;">Interactive Dashboard by Macro-Financial Stability Dept.</p>

    <div class="narrative-box">
        <h2 style="margin-top:0;">üèôÔ∏è The Tale of Two Huai Khwangs: Life Cycle of a District</h2>
        
        <h3>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: The Golden Age (‡∏¢‡∏∏‡∏Ñ‡∏ï‡∏∑‡πà‡∏ô‡∏ó‡∏≠‡∏á 2009-2015)</h3>
        <p>‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏ß‡∏¢‡∏Ç‡∏ß‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏≤‡∏Å "‡∏¢‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏≠‡∏≤‡∏®‡∏±‡∏¢" ‡πÄ‡∏õ‡πá‡∏ô <b>"New CBD Extension"</b> ‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏≤‡∏ô‡∏¥‡∏™‡∏á‡∏™‡πå‡∏Ç‡∏≠‡∏á‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ MRT ‡πÅ‡∏•‡∏∞‡∏ó‡∏∏‡∏ô‡∏à‡∏µ‡∏ô‡∏£‡∏∞‡∏•‡∏≠‡∏Å‡πÅ‡∏£‡∏Å ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏ó‡∏∏‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏° (Type 1-3) ‡∏ß‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô <span class="highlight">‡∏ä‡∏ô‡∏∞‡∏ó‡∏±‡πâ‡∏á GDP ‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ü‡πâ‡∏≠</span></p>

        <h3>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: The Reality Check (‡∏¢‡∏∏‡∏Ñ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á 2016-2019)</h3>
        <p>‡πÄ‡∏Å‡∏¥‡∏î‡∏†‡∏≤‡∏ß‡∏∞ <span class="danger">Oversupply</span> ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏¥‡πà‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏û‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡∏•‡∏≤‡∏î (Underperform) ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏Å‡πÄ‡∏Å‡πá‡∏á‡∏Å‡∏≥‡πÑ‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏¥‡∏î‡∏î‡∏≠‡∏¢ ‡πÅ‡∏•‡∏∞‡∏ï‡∏•‡∏≤‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á "‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á"</p>

        <h3>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: The Great Divergence (‡∏¢‡∏∏‡∏Ñ‡∏ó‡∏≤‡∏á‡πÉ‡∏Ñ‡∏£‡∏ó‡∏≤‡∏á‡∏°‡∏±‡∏ô 2020-‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)</h3>
        <p>‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡πÇ‡∏Ñ‡∏ß‡∏¥‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏ï‡∏±‡∏ß K (K-Shaped Recovery) ‡∏ï‡∏•‡∏≤‡∏î‡∏•‡πà‡∏≤‡∏á (Mass) ‡∏ã‡∏ö‡πÄ‡∏ã‡∏≤‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ß‡πÄ‡∏£‡∏∑‡∏≠‡∏ô ‡πÅ‡∏ï‡πà‡∏ï‡∏•‡∏≤‡∏î‡∏ö‡∏ô (Luxury) ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏µ <span class="focus">Anomaly Spike ‡πÉ‡∏ô‡∏õ‡∏µ 2021</span> ‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏∏‡πà‡∏á‡∏ó‡∏∞‡∏¢‡∏≤‡∏ô‡∏™‡∏ß‡∏ô‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</p>
    </div>

    <h2>1. The Asset Race: Where does Huai Khwang Stand?</h2>
    <p>‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô (Base 2009=100) ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏´‡πâ‡∏ß‡∏¢‡∏Ç‡∏ß‡∏≤‡∏á (HPI) ‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÇ‡∏•‡∏Å‡πÅ‡∏•‡∏∞‡∏ï‡∏•‡∏≤‡∏î‡∏£‡∏ß‡∏°</p>
    
    <div id="chart1" class="chart-wrapper"></div>
    
    <div class="insight">
        <b>üí° Auditor's Insight:</b> ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏™‡πâ‡∏ô <span style="color:#2ecc71; font-weight:bold;">‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß (Huai Khwang)</span> ‡∏ä‡πà‡∏ß‡∏á‡∏õ‡∏µ 2013-2015 ‡∏°‡∏±‡∏ô‡πÄ‡∏Ñ‡∏¢‡∏û‡∏∏‡πà‡∏á‡∏ä‡∏ô‡∏∞‡∏ó‡∏∏‡∏Å‡∏ï‡∏•‡∏≤‡∏î ‡πÅ‡∏ï‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏ú‡πà‡∏ß‡∏•‡∏á‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà 143 ‡∏à‡∏∏‡∏î ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà S&P 500 (‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á) ‡∏û‡∏∏‡πà‡∏á‡πÑ‡∏õ‡πÑ‡∏Å‡∏•‡∏ñ‡∏∂‡∏á 344 ‡∏à‡∏∏‡∏î
    </div>

    <h2>2. Supply Evolution: The Shift in Archetypes</h2>
    <p>‡πÄ‡∏£‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á Supply ‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£? (Mass Market vs. Luxury)</p>
    
    <div id="chart2" class="chart-wrapper"></div>
    <div class="insight">
        <b>üí° Auditor's Insight:</b> ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡πÉ‡∏ô‡∏õ‡∏µ‡∏´‡∏•‡∏±‡∏á‡πÜ (2021-2022) ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á <b>Type 1 (‡∏™‡∏µ‡∏ü‡πâ‡∏≤-Mass)</b> ‡∏•‡∏î‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á‡∏°‡∏≤‡∏Å ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏±‡∏ô‡πÑ‡∏õ‡∏ú‡∏•‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡πÅ‡∏û‡∏á (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß-Luxury) ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
    </div>

    <h2>3. The Timeline of Value (Bubble Chart)</h2>
    <p>‡πÄ‡∏à‡∏≤‡∏∞‡∏•‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£: ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ß‡∏á = ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô (‡∏¢‡∏π‡∏ô‡∏¥‡∏ï), ‡∏™‡∏µ = ‡∏Å‡∏•‡∏∏‡πà‡∏° Archetype</p>
    
    <div id="chart3" class="chart-wrapper"></div>
    <div class="insight">
        <b>üí° Auditor's Insight:</b> ‡∏•‡∏≠‡∏á‡πÄ‡∏≠‡∏≤‡πÄ‡∏°‡∏≤‡∏™‡πå‡πÑ‡∏õ‡∏ä‡∏µ‡πâ‡∏ó‡∏µ‡πà <b>‡∏õ‡∏µ 2021</b> ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏•‡∏≠‡∏¢‡πÇ‡∏î‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏™‡∏∏‡∏î ‡∏ô‡∏±‡πà‡∏ô‡∏Ñ‡∏∑‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ <b>"The Stage Mindscape"</b> ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≤‡∏ü HPI ‡∏õ‡∏µ‡∏ô‡∏±‡πâ‡∏ô‡∏û‡∏∏‡πà‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (Supply Shortage Effect)
    </div>

    <div class="footer">
        Generated by AI Financial Auditor Model<br>
        Source: User Database, Bank of Thailand, SET Smart, Yahoo Finance
    </div>
</div>

<script>
    // ==========================================
    // 1. DATASETS (EMBEDDED DIRECTLY)
    // ==========================================
    
    // Years timeline
    const years = [2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022];

    // Chart 1 Data (Indices Base 2009=100)
    const data_sp500 = [81.0, 100.0, 112.8, 112.8, 127.9, 165.8, 184.6, 183.3, 200.8, 239.8, 224.8, 289.7, 336.8, 427.4, 344.3];
    const data_gold  = [85.3, 100.0, 117.6, 141.2, 144.1, 114.7, 108.8, 108.8, 117.6, 120.6, 114.7, 126.5, 155.9, 167.6, 175.3];
    const data_set   = [61.3, 100.0, 140.6, 139.6, 189.5, 176.8, 203.9, 175.3, 210.0, 238.7, 212.9, 215.1, 197.3, 225.7, 227.2];
    const data_bot   = [100.0, 100.0, 105.0, 112.0, 125.0, 135.0, 138.0, 145.0, 148.0, 155.0, 165.0, 175.0, 178.0, 194.4, 198.0];
    const data_hk    = [107.9, 100.0, 99.0, 105.3, 118.9, 137.7, 134.7, 153.6, 135.1, 153.1, 129.6, 139.8, 134.2, 238.8, 143.4];
    const data_gdp   = [100.7, 100.0, 107.5, 108.4, 116.2, 119.3, 120.5, 124.2, 128.5, 133.8, 139.5, 142.4, 133.7, 135.7, 139.2];

    // Chart 2 Data (Supply Mix %)
    const mix_years = [2004, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022];
    const mix_t1 = [100, 0, 50, 50, 50, 0, 57, 40, 25, 75, 25, 29, 20, 71, 50, 100, 33]; // Mass (Blue)
    const mix_t2 = [0, 0, 0, 0, 0, 50, 29, 20, 0, 25, 50, 29, 40, 14, 0, 0, 33]; // Mid (Orange)
    const mix_t3 = [0, 100, 50, 50, 50, 50, 14, 40, 75, 0, 25, 42, 40, 15, 50, 0, 34]; // Luxury (Green)

    // Chart 3 Data (Bubble Timeline - Real Data from your files)
    const bubble_x = [2019, 2021, 2022, 2020, 2022, 2012, 2008, 2007, 2020, 2009, 2012, 2014, 2012, 2012, 2013, 2017, 2013, 2012, 2019, 2013, 2015, 2017, 2011, 2016, 2019, 2011, 2017, 2018, 2009, 2010, 2018, 2016, 2016, 2013, 2015, 2017, 2012, 2019, 2015, 2017, 2016, 2017, 2019, 2015, 2019, 2022, 2014, 2012, 2018, 2014, 2013, 2014, 2019, 2017, 2008, 2010, 2004, 2018, 2018];
    const bubble_y = [129629, 151923, 128095, 56645, 75600, 111003, 88697, 106666, 91600, 42857, 84814, 114705, 68085, 106060, 78214, 100000, 93548, 100778, 80317, 139199, 163636, 79915, 66785, 126708, 104090, 60702, 270588, 142500, 82857, 49687, 71326, 65476, 76666, 165151, 73142, 79600, 49378, 125000, 224583, 198561, 103225, 90000, 120733, 144144, 94676, 90000, 67857, 78214, 78214, 76000, 52857, 66923, 59600, 64782, 52666, 61870, 58333, 80425, 70642];
    const bubble_size = [1980, 477, 383, 189, 77, 705, 436, 483, 270, 126, 190, 281, 1002, 289, 199, 1337, 1254, 674, 217, 433, 755, 1844, 109, 159, 202, 958, 1911, 1404, 539, 597, 218, 1092, 1418, 645, 776, 653, 663, 591, 508, 319, 671, 157, 496, 347, 122, 121, 133, 217, 544, 79, 188, 192, 121, 112, 416, 101, 1324, 79, 77];
    const bubble_text = ["Siamese Rama 9", "The Stage Mindscape", "Quintara MHy'GEN", "Groove Scape 48", "Asher Koop", "Ideo Mobi Rama 9", "Diamond Ratchada", "Life @ Ratchada-Huai Khwang", "D Xel Ratchada 18", "Zenith Place", "The Colory Vivid", "The Capital Ekamai-Thonglor", "Supalai Wellington", "Ivy Ampio", "The Privacy Ratchada-Sutthisan B", "Artisan Ratchada", "Life Ratchadapisek", "Centric Ratchada-Huai Khwang", "Supalai Prime Rama 9", "Condolette Midst Rama 9", "Noble Revolve Ratchada 2", "Chapter One Eco", "The Tempo Ratchada", "Amaranta Residence", "Brown Ratchada-Huai Khwang", "TC Green Phase 1", "One9Five Asoke-Rama 9", "XT Huai Khwang", "Rhythm Ratchada-Huai Khwang", "U Delight @ Huai Khwang", "Maxi Prime Ratchada-Sutthisan", "Supalai Wellington 2", "Supalai Veranda Rama 9", "Supalai Premier Asoke", "TC Green Phase 2", "Rise Rama 9", "Aspire Rama 9", "Cloud Thonglor-Phetchaburi", "Ideo Mobi Asoke", "The Esse at Singha Complex", "The Niche Pride Thonglor-Phetchaburi", "JRY Rama 9", "The Base Phetchaburi-Thonglor", "Rhythm Asoke 2", "Lloyd Soonvijai-Thonglor", "Asher Ratchada", "Humble Living Ratchada-Sutthisan A", "The Privacy Ratchada-Sutthisan C", "Hi Sutthisan Condo", "The Revo Ladprao 48", "C Style Condo", "G Style Condo 1", "Asher Ratchada", "D Mark Condo @ Sutthisan", "Ivy Ratchada", "The Raffles", "Lumpini Ville Cultural Center", "Groove Ratchada-Ladprao", "Living Nest Ladprao 44"];
    // Colors for bubbles (Archetype mapped)
    const bubble_colors = ['#3498db', '#3498db', '#3498db', '#2ecc71', '#2ecc71', '#3498db', '#e74c3c', '#2ecc71', '#3498db', '#2ecc71', '#f39c12', '#e74c3c', '#f39c12', '#e74c3c', '#2ecc71', '#f39c12', '#f39c12', '#e74c3c', '#e74c3c', '#e74c3c', '#e74c3c', '#3498db', '#2ecc71', '#2ecc71', '#3498db', '#f39c12', '#f39c12', '#f39c12', '#e74c3c', '#e74c3c', '#2ecc71', '#f39c12', '#f39c12', '#e74c3c', '#f39c12', '#3498db', '#e74c3c', '#e74c3c', '#e74c3c', '#9b59b6', '#e74c3c', '#2ecc71', '#e74c3c', '#e74c3c', '#f39c12', '#f39c12', '#2ecc71', '#2ecc71', '#3498db', '#2ecc71', '#2ecc71', '#2ecc71', '#2ecc71', '#2ecc71', '#2ecc71', '#2ecc71', '#3498db', '#f39c12', '#2ecc71'];

    // ==========================================
    // 2. PLOTLY CONFIG
    // ==========================================
    
    const layout_common = {
        paper_bgcolor: '#1e1e1e',
        plot_bgcolor: '#1e1e1e',
        font: { family: 'Sarabun', color: '#ccc' },
        xaxis: { gridcolor: '#333', zerolinecolor: '#333' },
        yaxis: { gridcolor: '#333', zerolinecolor: '#333' },
        margin: { l: 50, r: 20, t: 50, b: 50 },
        legend: { orientation: 'h', y: 1.1, x: 0.5, xanchor: 'center' }
    };

    // --- RENDER CHART 1 ---
    Plotly.newPlot('chart1', [
        { x: years, y: data_sp500, name: 'S&P 500', line: {color: '#9b59b6', width: 2}, mode: 'lines+markers' },
        { x: years, y: data_gold,  name: 'Gold (THB)', line: {color: '#f1c40f', width: 2}, mode: 'lines+markers' },
        { x: years, y: data_hk,    name: 'Huai Khwang HPI', line: {color: '#2ecc71', width: 4}, mode: 'lines+markers' },
        { x: years, y: data_bot,   name: 'BKK Market (BOT)', line: {color: '#3498db', width: 2, dash: 'dash'} },
        { x: years, y: data_gdp,   name: 'Real GDP', line: {color: '#7f8c8d', width: 1, dash: 'dot'} }
    ], { ...layout_common, title: 'Asset Performance (Base 2009=100)' });

    // --- RENDER CHART 2 ---
    Plotly.newPlot('chart2', [
        { x: mix_years, y: mix_t1, name: 'Type 1 (Mass)', type: 'bar', marker: {color: '#3498db'} },
        { x: mix_years, y: mix_t2, name: 'Type 2 (Real Demand)', type: 'bar', marker: {color: '#f39c12'} },
        { x: mix_years, y: mix_t3, name: 'Type 3 (Luxury)', type: 'bar', marker: {color: '#2ecc71'} }
    ], { ...layout_common, title: 'Supply Archetype Mix (%)', barmode: 'stack' });

    // --- RENDER CHART 3 ---
    Plotly.newPlot('chart3', [{
        x: bubble_x, 
        y: bubble_y, 
        text: bubble_text,
        mode: 'markers',
        marker: {
            size: bubble_size,
            sizemode: 'area',
            sizeref: 2, // Scale factor
            color: bubble_colors,
            line: {color: '#fff', width: 0.5}
        },
        hovertemplate: '<b>%{text}</b><br>Year: %{x}<br>Price: %{y:,.0f} ‡∏ø<br>Units: %{marker.size}<extra></extra>'
    }], { 
        ...layout_common, 
        title: 'Project Timeline: Price vs. Density',
        xaxis: { ...layout_common.xaxis, title: 'Launch Year' },
        yaxis: { ...layout_common.yaxis, title: 'Price (Baht/SQM)' }
    });

</script>

</body>
</html>
